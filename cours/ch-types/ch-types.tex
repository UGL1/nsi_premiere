\chapter{Types de variables}
\label{ch:types}
\introduction{Chic type !}
\begin{aretenir}
    \begin{itemize}
        \item 	les types de variables simples sont \mintinline{python}{bool}, \mintinline{python}{int} et \mintinline{python}{float};
        \item 	les types \mintinline{python}{str} et \mintinline{python}{list} sont structurés : on accède à leurs éléments par des indices entiers;
        \item 	le type \mintinline{python}{dict} représente des couples \og clé-valeurs\fg{};
        \item 	il est parfois possible (et souhaitable) de convertir le type d'une variable.
    \end{itemize}
\end{aretenir}
\textsc{Python} distingue plusieurs types de variables, voici les principaux :
\section{Le type bool}
Il sert à représenter les \textit{variables booléennes} : une variable de type \mintinline{python}{bool} est une valeur logique et vaut \mintinline{python}{True} (vrai) ou
\mintinline{python}{False} (faux).


\begin{pys}\begin{minted}{python}
>>> a = bool()
>>> a
False
>>> b = True
>>> b
True
>>> c = (3 > 2)
>>> c
True
\end{minted}
\end{pys}

Les \mintinline{python}{bool} servent très souvent lorsqu'on veut \textit{tester} si une condition est vraie ou non (on y reviendra plus tard).\\
Sur les \mintinline{python}{bool}, on dispose d'\textit{opérations logiques} : \mintinline{python}{or} (ou), \mintinline{python}{and} (et) et \mintinline{python}{not} (non).

\begin{pys}\begin{minted}{python}
>>> True and False
False
>>> True or False
True
>>> not (3 < 1)
True
\end{minted}
\end{pys}

\section{Le type int}\label{sec:int}

Il sert à représenter les \textit{entiers relatifs} (\textit{integer} signifie \og entier \fg{} en Anglais).\\
Sur les \mintinline{python}{int}, on dispose des opérations \mintinline{python}{+} (addition), \mintinline{python}{-} (soustraction) et \mintinline{python}{*} (multiplication).

\begin{pys}\begin{minted}{python}
>>> a = int()
>>> a
0
>>> b = 3
>>> c = 2
>>> b + c
5
>>> 2 * b
6
>>> b - 2 * c
-1
\end{minted}
\end{pys}

On dispose également de \textit{deux opérations très pratiques} : soient \mintinline{python}{a} et \mintinline{python}{b} deux \mintinline{python}{int}, et \mintinline{python}{b} non nul, alors on peut effectuer
la \textit{division euclidienne} de \mintinline{python}{a} par \mintinline{python}{b}.\\
\mintinline{python}{a // b} est le \textit{quotient} et \mintinline{python}|a % b| est le \textit{reste}.

\begin{pys}\begin{minted}{python}
>>> 64 // 10
6
>>> 64 % 10
4
>>> 22 // 7
3
>>> 22 % 7
1
\end{minted}
\end{pys}



On dispose de l'opération d'\textit{exponentiation} (opération puissance), notée \mintinline{python}{**}.\\
\textbf{Attention :} Cette opération peut produire un résultat \textit{non-entier}, de type \mintinline{python}{float} (voir partie suivante).

\begin{pys}\begin{minted}{python}
>>> 2 ** 3
8
>>> 10 ** 4
10000
>>> 2 ** (-1)
0.5
\end{minted}
\end{pys}

Pour finir, la \textit{division décimale} peut être effectuée sur des entiers, mais elle renvoie un résultat de type \mintinline{python}{float}.

\begin{pys}\begin{minted}{python}
>>> 10 / 2
5.0
>>> 2 / 3
0.6666666666666666
\end{minted}
\end{pys}


\section{Le type str}

Le type \mintinline{python}{str} pour représenter les \textit{chaînes de caractères} (\mintinline{python}{str} est l'abréviation de \emph{string}, qui veut dire chaîne en anglais).
Lors d'une affectation à une variable de type \mintinline{python}{str}, on peut utiliser les symboles \mintinline{python}{'}, \mintinline{python}{"} ou même \mintinline{python}{'''} (suivant que la chaîne contient
des apostrophes, ou des guillemets).

\begin{pys}\begin{minted}{python}
>>> a = str()
>>> a
''
>>> b = 'Bonjour.'
>>> b
'Bonjour'
>>> 'J'aime Python.'
SyntaxError
>>> "J'aime Python."
"J'aime Python."
>>> "Je n'aime pas qu'on m'appelle "geek"."
SyntaxError
>>> """Je n'aime pas qu'on m'appelle "geek"."""
'Je n\'aime pas qu\'on m\'appelle "geek".'
\end{minted}
\end{pys}

L'opérateur + appliqué à deux chaînes de caractères produit une nouvelle chaîne qui est la concaténation (c'est-à-dire la mise bout-à-bout) des deux premières.\\

On peut aussi multiplier une variable de type \mintinline{python}{str} par un \mintinline{python}{int}.\\

\begin{pys}\begin{minted}{python}
>>> a = 'Yes'
>>> b = 'No'
>>> a + b
'YesNo'
>>> b + a
'NoYes'
>>> 2 * a + 3 * b
'YesYesNoNoNo'
\end{minted}
\end{pys}

Les variables de type \mintinline{python}{str} sont composées de caractères \emph{alphanumériques}.\\ On peut y accéder de la manière suivante :

\begin{pys}\begin{minted}{python}
>>> chaine = 'Bonjour !'
>>> chaine[0]
'B'
>>> chaine[5]
'u'
\end{minted}
\end{pys}

Voici comment \textsc{Python} représente  la chaîne précédente :

\begin{center}
    \alternaterowcolors
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|}
        \hline
        i                        & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 \\
        \hline
        \mintinline{python}{chaine[i]} & B & o & n & j & o & u & r &   & ! \\
        \hline
    \end{tabular}
\end{center}

On a parfois besoin de connaître la longueur (\emph{length} en anglais) d'une chaîne de caractères :

\begin{pys}\begin{minted}{python}
>>> chaine = 'onzelettres'
>>> len(chaine)
11
\end{minted}
\end{pys}

On peut aussi accéder facilement au dernier (ou à l'avant dernier) caractère d'une variable de type \mintinline{python}{str} :

\begin{pys}\begin{minted}{python}
>>> a = "M'enfin ?!"
>>> a[-1]
'!'
>>> a[-2]
'?'
\end{minted}
\end{pys}

Enfin on peut vouloir \textit{extraire une sous-chaîne} d'une chaîne : \mintinline{python}{chaine[p:q]} renvoie la sous-chaîne de caractère qui commence par
\mintinline{python}{chaine[p]} et qui se termine par \mintinline{python}{chaine[q-1]} :

\begin{pys}\begin{minted}{python}
>>> a = 'Salut'
>>> a[1:3]
'al'
\end{minted}
\end{pys}

Pour terminer, on peut vouloir tronquer à gauche ou à droite. La syntaxe est la même :\\
- \mintinline{python}{chaine[p:]} renvoie la sous-chaîne commençant par \mintinline{python}{chaine[p]}.\\
-  \mintinline{python}{chaine[:p]} renvoie la sous-chaîne se terminant par \mintinline{python}{chaine[p-1]}.

\begin{pys}\begin{minted}{python}
>>> a = 'Salut'
>>> a[:3] + '0' + a[3:]
'Sal0ut'
\end{minted}
\end{pys}

\section{Le type list}

Le type \mintinline{python}{list} sert à représenter des \textit{listes ordonnées}, indexées par $\lbrace 0;1;\ldots ;n\rbrace\quad (n\in\N)$.\\
Pour une variable \mintinline{python}{a} de type \mintinline{python}{list}, on accèdera à \mintinline{python}{a[0]}, \mintinline{python}{a[1]}\ldots\\
Les éléments d'une liste peut être de types différents.

\begin{pys}\begin{minted}{python}
>>> vide = list()
>>> vide
[]
>>> notes = [12, 11, 20, 9]
>>> notes[1]
11
>>> fouillis = [True, 1, 2.1, 'salut']
>>> fouillis[0]
True
\end{minted}
\end{pys}

On dispose des mêmes opérations que pour le type \mintinline{python}{str}: \mintinline{python}{+} sert à concaténer deux listes, et on peut multiplier une liste par un \mintinline{python}{int}.\\

On reviendra plus tard sur ce type très utile.

\section{Le type dict}
Le type \mintinline{python}{dict} pour représenter des \textit{dictionnaires}.\\
Les dictionnaires généralisent les listes car ils peuvent être indexés par des ensembles quelconques.\\
Pour une variable \mintinline{python}{couleur} de type \mintinline{python}{dict}, on aura par exemple \mintinline{python}{couleur['ciel']='bleu'}.

\begin{pys}\begin{minted}{python}
>>> chanteur = {'Nirvana': 'Kurt Cobain', 'U2': 'Bono'}
>>> chanteur['U2']
'Bono'
\end{minted}
\end{pys}


La notion de dictionnaire peut s'avérer assez compliquée à gérer (surtout au départ quand on manque de pratique) mais elle est très puissante et parfois très élégante.\\

\section{La fonction type et les conversions de type}

Pour connaître (ou vérifier) le type d'une variable, on peut utiliser la fonction \mintinline{python}{type}.

\begin{pys}\begin{minted}{python}
>>> a = 2
>>> type(a)
<class 'int'>
>>> type('hello')
<class 'str'>
>>> type(22 / 7)
<class 'float'>
\end{minted}
\end{pys}


Enfin, pour changer le type d'une variable, on peut utiliser les fonctions \mintinline{python}{int}, \mintinline{python}{float}, \mintinline{python}{str} et \mintinline{python}{list} (quand cela a un sens) comme des \textit{fonctions de conversion}.

\begin{pys}\begin{minted}{python}
>>> a = 2020
>>> b = float(a)
>>>	b
2020.0
>>> c = str(b)
>>> c
'2020.0'
\end{minted}
\end{pys}

\section{Et les constantes ?}


Certains langages permettent de définir des \textit{constantes} (\textsc{C++}, \textsc{Java} par exemple). Une constante est une variable dont la valeur est fixée lors de son initialisation et qui ne peut plus être modifiée ensuite.

\begin{encadrecolore}{Attention}{UGLiRed}
    On ne peut pas définir de constantes dans \textsc{Python}.\\
    Cependant on utilise la convention suivante : les variables écrites en majuscules sont à considérer comme des constantes.
\end{encadrecolore}

\begin{pyc}\begin{minted}{python}
TAILLE_MINI = 140
TAILLE_MAXI = 200
\end{minted}
\end{pyc}


\section{Quelques \og trucs \fg{} utiles}

\subsubsection*{Affectations multiples}
\textsc{Python} permet d'affecter plusieurs valeurs à plusieurs variables en même temps.

\begin{pys}\begin{minted}{python}
>>> a, b= 10, 2
>>> a
10
>>> b
2

>>> a, b = b, a
>>> a
2
>>> b
10
\end{minted}
\end{pys}

\subsubsection*{Notation condensée}
On est souvent amené à écrire des instructions telles que  \mintinline{python}{a = a + 1} ou \mintinline{python}{b = b / 2}. Cela peut être lourd quand les variables ne s'appellent
pas \mintinline{python}{a} ou \mintinline{python}{b} mais \mintinline{python}{rayon_sphere} ou \mintinline{python}{largeur_niveau}. On peut utiliser les notation suivantes :
\begin{pys}\begin{minted}{python}
>>> rayon_sphere = 3.4
>>> rayon_sphere /= 2
>>> rayon_sphere
1.7
>>> largeur_niveau = 19
>>> largeur_niveau += 1
>>> largeur_niveau
20
\end{minted}
\end{pys}

On dispose également de \mintinline{python}{*=}, \mintinline{python}{//=}, \mintinline{python}{\%=}, \mintinline{python}{-=} et \mintinline{python}{**=}.
\section{Exercices}

\begin{exercice}[ : fonction print]

    La fonction \mintinline{python}{print} sert à afficher à l'écran le contenu d'une variable, ou bien une chaîne de caractère.\\
    Recopier et observer :
\begin{minted}{python}
>>> print('Bonjour')
>>> a = 2020
>>> print('Nous sommes en ', a)
>>> b = 7
>>> print('Dans ', b,' ans, nous serons en ', a + b)
\end{minted}
\end{exercice}

\begin{exercice}[ : affectations 1]

    Qu'affiche le script suivant (ne pas chercher à l'écrire en machine) ?
\begin{minted}{python}
a = 1
b = a + 1
c = 2 * b - ( a + b - 4)
print(b, c)
\end{minted}
\end{exercice}

\begin{exercice}[ : affectations 2]
    Qu'affiche le script suivant ?
    
    \begin{minted}{python}
a, b = 2, 5
b, c = b + 1, a + b
print(c)
    \end{minted}
    \end{exercice}

    \begin{exercice}[ : affectations 3]
        Qu'affiche le script suivant ?
        \begin{minted}{python}    
a, b, c = 1, 2, 3
a, b, c = b, c, a
a, b, c = b, c, a
a, b, c = b, c, a
print(a, b, c)
        \end{minted}
    \end{exercice}

\begin{exercice}[ : fonction input ]

    C'est le pendant de la fonction \mintinline{python}{print} : elle permet à l'utilisateur d'entrer une chaîne de caractères à l'aide du clavier.

    Recopier et observer :
\begin{minted}{python}
>>> prenom = input('Quel est ton prénom ? ')
>>> reponse = 'Enchanté, ' + prenom
>>> print(reponse)
\end{minted}
\end{exercice}

\begin{exercice}

    Le script suivant produit une erreur :
\begin{minted}{python}
age = input('Quel est ton age ? ')
vieux = 10 + age
print('Dans 10 ans tu auras ', vieux, ' ans.')
\end{minted}
    Observer le message d'erreur (surtout la dernière ligne).\\
    À l'aide d'une \textit{conversion de type}, rectifier le script.
\end{exercice}
\begin{exercice}
D'où vient le problème ? Proposer une solution (deux si tu es astucieu\cdot x\cdot se).
\begin{minted}{python}
>>> chaine = 'Mon nombre préféré est le '
>>> nb = 7
>>> print(chaine+nb)
\end{minted}
\end{exercice}

\begin{exercice}
    Donner 3 manières de définir en une ligne une variable \mintinline{python}{a} de type \mintinline{python}{float} valant 2.
\end{exercice}

\begin{exercice}
    Que fait le script suivant (essayer de le comprendre sans le taper) ?
\begin{minted}{python}
pouces = input('Entrez la valeur en pouces à convertir : ')
pouces = float(pouces)
print('Cela fait ', pouces * 2.54, ' centimètres.')
\end{minted}

    \'Ecrire un script qui demande la taille d'un fichier en kilooctets (ko) puis la convertit en octets (1ko = $2^{10}$ octets).
\end{exercice}
\begin{exercice}
    Le numéro de sécurité sociale est constitué de 13 chiffres auquel s'ajoute la clé de contrôle (2 chiffres).\\
    Exemple : $$\underbrace{1\ 89\ 11\ 26\ 108\ 268}_{\textrm{chiffres}}\ \underbrace{91}_{\textrm{clé}}$$
    La clé de contrôle est calculée par la formule : 97 - (numéro de sécurité sociale modulo 97).\\
    À l'écrit, retrouver la clé de contrôle de votre numéro de sécurité sociale (ou à défaut, de l'exemple).\\
    Quel est l'intérêt de la clé de contrôle ?\\
    \'Ecrire un script qui, à partir des 13 chiffres du numéro de sécurité sociale, affiche le numéro complet.
\end{exercice}
\begin{exercice}
    L'identifiant d'accès au réseau du lycée est construit de la manière suivante : initiale du prénom puis les 8 premiers caractères du nom (le tout en minuscule).\\
    Exemple : Alexandre Lecouturier donne \texttt{alecoutur}.\\
    \'Ecrire un script qui, à partir des deux variables \texttt{prenom} et \texttt{nom}, affiche l'identifiant.\\
    Tu pourras créer une variable \mintinline{python}{nom}, une variable \mintinline{python}{prenom} et utiliser la fonction \mintinline{python}{input}.\\
    Pour passer \mintinline{python}{nom} et \mintinline{python}{prenom} en minuscule, il suffit de taper :
    \begin{minted}{python}
nom = nom.lower()
prenom = prenom.lower()
\end{minted}
\end{exercice}
